# 考试系统完整测试用例

## 📋 测试概览

**系统名称**: 在线考试答题系统  
**测试范围**: 全功能模块测试  
**用户角色**: 管理员(ADMIN) + 普通考生(USER)  
**测试类型**: 功能测试、接口测试、用户体验测试、异常场景测试  
**测试环境**: 前端Vue3 + 后端Spring Boot + MySQL数据库  

---

## 🎯 测试目标

1. **功能完整性验证** - 确保所有功能模块正常工作
2. **角色权限验证** - 确保不同角色的权限控制正确
3. **数据一致性验证** - 确保数据操作的准确性和完整性
4. **用户体验验证** - 确保界面友好、操作流畅
5. **异常处理验证** - 确保系统在异常情况下的稳定性

---

## 👤 测试用户准备

### 管理员账户
- **用户名**: admin
- **密码**: admin123
- **角色**: ADMIN
- **权限**: 题库管理、会话管理、评分管理、统计分析

### 普通考生账户
- **用户名**: zhangsan, lisi, wangwu
- **密码**: 123456
- **角色**: USER  
- **权限**: 答题、查看个人记录

---

## 🔐 一、身份认证模块测试

### TC001 - 登录功能测试

#### 测试场景1.1: 管理员正常登录
**前置条件**: 系统正常运行，存在管理员账户  
**测试步骤**:
1. 访问登录页面 `/login`
2. 输入用户名: `admin`
3. 输入密码: `admin123`
4. 点击登录按钮

**预期结果**:
- ✅ 登录成功，跳转到管理员仪表板 `/dashboard`
- ✅ 页面显示管理员导航菜单
- ✅ 右上角显示用户信息和登出按钮
- ✅ Token正确存储到localStorage

#### 测试场景1.2: 普通考生正常登录
**前置条件**: 系统正常运行，存在考生账户  
**测试步骤**:
1. 访问登录页面 `/login`
2. 输入用户名: `zhangsan`
3. 输入密码: `123456`
4. 点击登录按钮

**预期结果**:
- ✅ 登录成功，跳转到开始答题页面 `/start-answer`
- ✅ 页面显示考生功能菜单
- ✅ 只能看到答题相关功能，无管理功能

#### 测试场景1.3: 登录异常场景
**测试数据**:
| 用户名 | 密码 | 预期结果 |
|--------|------|----------|
| admin | 错误密码 | 登录失败，提示密码错误 |
| 不存在用户 | 任意密码 | 登录失败，提示用户不存在 |
| 空用户名 | admin123 | 提示用户名不能为空 |
| admin | 空密码 | 提示密码不能为空 |

### TC002 - 权限控制测试

#### 测试场景2.1: 路由权限验证
**测试步骤**:
1. 使用考生账户登录
2. 直接访问管理员页面URL

**测试用例**:
| 访问URL | 预期结果 |
|---------|----------|
| `/dashboard` | 403权限不足或重定向到考生首页 |
| `/question-bank` | 403权限不足 |
| `/answer-sessions` | 403权限不足 |
| `/scoring` | 403权限不足 |
| `/statistics` | 403权限不足 |

#### 测试场景2.2: 接口权限验证
**测试步骤**:
1. 使用考生Token调用管理员接口
2. 验证返回结果

**重点接口**:
- `POST /api/question-bank` - 创建题目
- `DELETE /api/question-bank/{id}` - 删除题目
- `GET /api/answer-session/admin/list` - 管理员查看所有会话
- `POST /api/scoring/manual` - 手动评分

**预期结果**: 所有请求返回403 Forbidden

---

## 📚 二、管理员模块测试

### TC003 - 题库管理功能测试

#### 测试场景3.1: 创建题目
**前置条件**: 管理员已登录  
**测试步骤**:
1. 进入题库管理页面 `/question-bank`
2. 点击"添加题目"按钮
3. 填写题目信息并保存

**单选题测试数据**:
```
题目标题: Vue.js是什么类型的框架？
题目类型: 单选题(1)
选项: ["前端框架", "后端框架", "数据库", "操作系统"]
正确答案: 前端框架
难度: 2
分值: 3
标签: 前端,Vue
```

**预期结果**:
- ✅ 题目创建成功
- ✅ 列表中显示新创建的题目
- ✅ 题目信息完整准确

#### 测试场景3.2: 批量题目操作
**测试步骤**:
1. 选择多个题目
2. 执行批量操作

**测试用例**:
| 操作类型 | 选择数量 | 预期结果 |
|----------|----------|----------|
| 批量删除 | 3个题目 | 成功删除，列表更新 |
| 批量启用 | 5个题目 | 状态更新为启用 |
| 批量禁用 | 2个题目 | 状态更新为禁用 |

#### 测试场景3.3: 题目搜索和筛选
**测试数据**:
| 搜索条件 | 关键词/筛选 | 预期结果 |
|----------|-------------|----------|
| 关键词搜索 | "Vue" | 显示包含Vue的题目 |
| 题型筛选 | 单选题 | 只显示单选题 |
| 难度筛选 | 难度3 | 只显示难度为3的题目 |
| 标签筛选 | "前端" | 显示前端相关题目 |

### TC004 - 会话管理功能测试

#### 测试场景4.1: 查看所有答题会话
**前置条件**: 
- 管理员已登录
- 系统中存在多个答题会话

**测试步骤**:
1. 进入答题会话管理页面 `/answer-sessions`
2. 查看会话列表

**验证点**:
- ✅ 显示所有用户的答题会话
- ✅ 包含会话编码、用户名、状态、进度等信息
- ✅ 实时统计数据正确显示

#### 测试场景4.2: 会话状态管理
**测试步骤**:
1. 选择进行中的会话
2. 执行状态变更操作

**测试用例**:
| 当前状态 | 操作 | 预期结果 |
|----------|------|----------|
| 进行中 | 强制完成 | 状态变为已完成 |
| 进行中 | 设为超时 | 状态变为已超时 |
| 进行中 | 延长时间 | 剩余时间增加 |

#### 测试场景4.3: 批量会话操作
**测试步骤**:
1. 选择多个会话
2. 执行批量操作

**验证用例**:
- 批量完成：选中的会话状态全部变为已完成
- 批量超时：选中的会话状态全部变为已超时  
- 批量删除：选中的会话被删除

### TC005 - 评分管理功能测试

#### 测试场景5.1: 主观题手动评分
**前置条件**: 
- 系统中存在待评分的简答题/编程题
- 管理员已登录

**测试步骤**:
1. 进入评分管理页面 `/scoring`
2. 查看待评分列表
3. 选择一个简答题进行评分
4. 给出分数和评语

**测试数据**:
```
学生答案: "面向对象编程的三大特性是封装、继承、多态..."
评分: 4分 (满分5分)
评语: "回答基本正确，但对多态的理解不够深入"
```

**预期结果**:
- ✅ 评分成功保存
- ✅ 记录从待评分列表移除
- ✅ 学生总分重新计算

#### 测试场景5.2: 评分记录查询
**测试步骤**:
1. 查看评分历史记录
2. 按评分员筛选
3. 按时间范围筛选

**验证点**:
- ✅ 显示完整的评分记录
- ✅ 包含评分员、评分时间、得分等信息
- ✅ 筛选功能正常工作

### TC006 - 统计分析功能测试

#### 测试场景6.1: 数据统计图表
**前置条件**: 系统中有足够的答题数据

**测试步骤**:
1. 进入统计分析页面 `/statistics`
2. 查看各种统计图表

**验证项目**:
- ✅ 用户答题分布图表显示正确
- ✅ 题目难度分析数据准确
- ✅ 分数分布统计合理
- ✅ 时间趋势图表正常

#### 测试场景6.2: 数据导出功能
**测试步骤**:
1. 选择统计时间范围
2. 点击导出按钮
3. 下载Excel文件

**验证点**:
- ✅ 文件成功下载
- ✅ 数据完整准确
- ✅ 格式符合要求

---

## 🎓 三、考生模块测试

### TC007 - 开始答题功能测试

#### 测试场景7.1: 创建答题会话
**前置条件**: 
- 考生已登录
- 题库中有足够的题目

**测试步骤**:
1. 进入开始答题页面 `/start-answer`
2. 选择题目类型和数量
3. 点击开始答题

**测试数据**:
```
题目类型: 混合题型(单选+多选+判断)
题目数量: 10
答题时长: 30分钟
```

**预期结果**:
- ✅ 成功创建答题会话
- ✅ 获得唯一的会话编码
- ✅ 跳转到答题页面
- ✅ 题目按序号显示

#### 测试场景7.2: 不同题型答题测试
**测试步骤**:
1. 依次回答不同类型的题目
2. 验证答题交互

**单选题测试**:
- ✅ 只能选择一个选项
- ✅ 选项切换正常
- ✅ 答案正确保存

**多选题测试**:
- ✅ 可以选择多个选项
- ✅ 选项状态切换正常
- ✅ 至少选择一个才能继续

**判断题测试**:
- ✅ 正确/错误选项清晰
- ✅ 答案正确记录

**简答题测试**:
- ✅ 文本输入框正常
- ✅ 字数统计显示
- ✅ 内容正确保存

### TC008 - 答题过程功能测试

#### 测试场景8.1: 答题进度控制
**测试步骤**:
1. 在答题过程中使用各种功能
2. 验证功能正确性

**功能验证**:
| 功能 | 操作 | 预期结果 |
|------|------|----------|
| 上一题 | 点击上一题按钮 | 返回前一题，答案保持 |
| 下一题 | 点击下一题按钮 | 进入下一题 |
| 题目导航 | 点击题号跳转 | 直接跳转到指定题目 |
| 答案修改 | 修改已答题目 | 答案正确更新 |

#### 测试场景8.2: 时间控制功能
**测试步骤**:
1. 观察答题时间显示
2. 测试时间相关功能

**验证点**:
- ✅ 倒计时正确显示
- ✅ 时间不足时有警告提示
- ✅ 时间到达时自动提交
- ✅ 答题时长统计准确

#### 测试场景8.3: 会话状态保持
**测试步骤**:
1. 答题过程中刷新页面
2. 关闭浏览器后重新打开
3. 继续答题

**预期结果**:
- ✅ 答题进度保持不变
- ✅ 已答题目答案保持
- ✅ 剩余时间正确计算
- ✅ 会话状态正常

### TC009 - 答题完成功能测试

#### 测试场景9.1: 正常提交答卷
**前置条件**: 考生已完成所有题目

**测试步骤**:
1. 点击提交答卷按钮
2. 确认提交对话框
3. 查看结果页面

**预期结果**:
- ✅ 提交成功确认
- ✅ 显示总分和各题得分
- ✅ 会话状态变为已完成
- ✅ 客观题自动评分正确

#### 测试场景9.2: 部分题目未答提交
**测试步骤**:
1. 有题目未回答
2. 尝试提交答卷

**预期结果**:
- ✅ 提示有未答题目
- ✅ 询问是否确认提交
- ✅ 确认后可以提交
- ✅ 未答题目记录为空答案

### TC010 - 个人记录查看功能测试

#### 测试场景10.1: 答题记录列表
**前置条件**: 考生有多次答题记录

**测试步骤**:
1. 进入我的答题记录页面 `/my-records`
2. 查看记录列表

**验证点**:
- ✅ 显示所有个人答题记录
- ✅ 按时间倒序排列
- ✅ 显示会话状态、得分、用时等信息
- ✅ 只能看到自己的记录

#### 测试场景10.2: 答题详情查看
**测试步骤**:
1. 点击查看某次答题详情
2. 查看答题过程和结果

**验证内容**:
- ✅ 显示每道题目和答案
- ✅ 显示正确答案对比
- ✅ 显示得分情况
- ✅ 显示评语（如有）

---

## 🔧 四、异常场景测试

### TC011 - 网络异常测试

#### 测试场景11.1: 网络中断恢复
**测试步骤**:
1. 答题过程中断开网络
2. 继续答题操作
3. 恢复网络连接

**预期结果**:
- ✅ 离线状态提示用户
- ✅ 答案缓存到本地
- ✅ 网络恢复后自动同步
- ✅ 数据不丢失

#### 测试场景11.2: 服务器异常处理
**测试步骤**:
1. 模拟服务器500错误
2. 模拟接口超时
3. 观察系统反应

**预期结果**:
- ✅ 友好的错误提示
- ✅ 提供重试机制
- ✅ 不影响已输入数据

### TC012 - 并发场景测试

#### 测试场景12.1: 多用户同时答题
**测试步骤**:
1. 创建多个考生账户
2. 同时登录开始答题
3. 观察系统性能

**验证点**:
- ✅ 系统响应正常
- ✅ 每个用户数据独立
- ✅ 会话互不干扰

#### 测试场景12.2: 管理员并发操作
**测试步骤**:
1. 多个管理员同时操作
2. 执行题目编辑、会话管理等

**预期结果**:
- ✅ 数据一致性保持
- ✅ 操作冲突处理得当
- ✅ 并发锁机制有效

### TC013 - 边界条件测试

#### 测试场景13.1: 极限数据测试
**测试用例**:
| 测试项 | 极限值 | 预期结果 |
|--------|--------|----------|
| 答题时长 | 1分钟 | 系统正常工作 |
| 题目数量 | 100题 | 性能可接受 |
| 答案长度 | 10000字符 | 正确保存 |
| 同时在线用户 | 50人 | 系统稳定 |

#### 测试场景13.2: 非法输入测试
**测试数据**:
- SQL注入尝试
- XSS脚本输入
- 特殊字符输入
- 超长字符串

**预期结果**:
- ✅ 输入验证有效
- ✅ 安全过滤正常
- ✅ 错误提示友好

---

## 📱 五、用户体验测试

### TC014 - 界面交互测试

#### 测试场景14.1: 响应式设计
**测试步骤**:
1. 在不同设备上访问系统
2. 测试界面适配效果

**测试设备**:
| 设备类型 | 分辨率 | 验证点 |
|----------|--------|--------|
| 桌面端 | 1920x1080 | 布局完整，功能正常 |
| 平板 | 768x1024 | 界面自适应，操作便捷 |
| 手机 | 375x667 | 移动端友好，可正常答题 |

#### 测试场景14.2: 用户操作体验
**验证项目**:
- ✅ 页面加载速度 < 3秒
- ✅ 按钮点击响应及时
- ✅ 表单验证提示清晰
- ✅ 导航路径清晰合理

### TC015 - 无障碍访问测试

#### 测试场景15.1: 键盘导航
**测试步骤**:
1. 使用Tab键导航页面
2. 使用回车键激活功能
3. 使用空格键选择选项

**预期结果**:
- ✅ 焦点顺序合理
- ✅ 所有功能可键盘操作
- ✅ 焦点指示清晰可见

#### 测试场景15.2: 屏幕阅读器支持
**验证点**:
- ✅ 重要信息有文字说明
- ✅ 图片有alt属性
- ✅ 表单有对应的label

---

## 📊 六、性能测试

### TC016 - 负载测试

#### 测试场景16.1: 用户负载测试
**测试配置**:
```
并发用户数: 100
测试时长: 30分钟
场景: 登录-答题-提交的完整流程
```

**性能指标**:
| 指标 | 目标值 | 实际值 | 结果 |
|------|--------|--------|------|
| 平均响应时间 | < 2秒 | | |
| 95%响应时间 | < 5秒 | | |
| 错误率 | < 1% | | |
| TPS | > 50 | | |

#### 测试场景16.2: 数据库性能
**测试项目**:
- 大量答题记录查询
- 复杂统计报表生成
- 并发数据写入

**预期结果**:
- ✅ 查询响应时间 < 3秒
- ✅ 数据一致性保持
- ✅ 无死锁现象

---

## 🛡️ 七、安全测试

### TC017 - 身份认证安全

#### 测试场景17.1: JWT Token安全
**测试项目**:
- Token过期处理
- Token篡改检测
- 刷新Token机制

**验证点**:
- ✅ 过期Token被拒绝
- ✅ 无效Token返回401
- ✅ 敏感操作需要验证

#### 测试场景17.2: 密码安全
**测试步骤**:
1. 查看数据库中密码存储
2. 测试密码复杂度要求

**预期结果**:
- ✅ 密码经过加密存储
- ✅ 密码策略得到执行

### TC018 - 数据安全测试

#### 测试场景18.1: SQL注入防护
**测试数据**:
```sql
'; DROP TABLE users; --
1' OR '1'='1
admin'--
```

**预期结果**:
- ✅ 所有注入尝试被阻止
- ✅ 数据库结构未受影响

#### 测试场景18.2: XSS防护
**测试数据**:
```html
<script>alert('xss')</script>
<img src=x onerror=alert('xss')>
javascript:alert('xss')
```

**预期结果**:
- ✅ 脚本被过滤或转义
- ✅ 页面不执行恶意代码

---

## 📋 八、测试报告模板

### 测试执行记录

#### 测试环境信息
```
测试环境: [测试/预生产/生产]
系统版本: v1.0.0
数据库版本: MySQL 8.0
浏览器: Chrome 91+, Firefox 89+, Safari 14+
测试数据: [测试数据集版本]
```

#### 缺陷统计
| 严重级别 | 数量 | 状态 | 描述 |
|----------|------|------|------|
| 严重 | 0 | - | 系统崩溃、数据丢失类问题 |
| 重要 | 2 | 待修复 | 功能无法使用、逻辑错误 |
| 一般 | 5 | 部分修复 | 界面问题、性能问题 |
| 轻微 | 3 | 已修复 | 文字错误、小的界面问题 |

#### 测试结论
- ✅ **功能测试**: 核心功能全部通过
- ✅ **性能测试**: 满足预期性能指标
- ✅ **安全测试**: 无重大安全漏洞
- ⚠️  **用户体验**: 部分界面需要优化
- ✅ **兼容性测试**: 主流浏览器兼容性良好

#### 建议
1. **优先修复重要级别缺陷**
2. **持续优化用户界面体验**
3. **建立自动化测试回归体系**
4. **制定系统监控和告警机制**

---

## 🚀 九、自动化测试建议

### 接口自动化测试
**覆盖接口**:
- 用户认证接口
- 题库管理接口  
- 答题会话接口
- 评分管理接口

**工具推荐**: Postman + Newman 或 Jest + Supertest

### UI自动化测试
**核心流程**:
- 用户登录流程
- 完整答题流程
- 管理员操作流程

**工具推荐**: Cypress 或 Selenium WebDriver

### 持续集成
**CI/CD流程**:
1. 代码提交触发测试
2. 单元测试 → 接口测试 → UI测试
3. 测试通过后自动部署
4. 部署后执行回归测试

---

## 📞 十、测试支持

### 测试数据准备脚本
```sql
-- 创建测试用户
INSERT INTO sys_user (username, password, real_name, role, email, enabled) VALUES 
('testuser1', '$2a$10$encrypted_password', '测试用户1', 'USER', 'test1@example.com', TRUE),
('testuser2', '$2a$10$encrypted_password', '测试用户2', 'USER', 'test2@example.com', TRUE);

-- 创建测试题目
INSERT INTO question_bank (title, type, options, correct_answer, difficulty, score, tags, enabled) VALUES 
('测试单选题', 1, '["选项A", "选项B", "选项C", "选项D"]', '选项A', 2, 3, '测试,单选', TRUE),
('测试多选题', 2, '["选项A", "选项B", "选项C", "选项D"]', '["选项A", "选项C"]', 2, 4, '测试,多选', TRUE);
```

### 测试工具清单
- **接口测试**: Postman、Insomnia
- **性能测试**: JMeter、LoadRunner
- **安全测试**: OWASP ZAP、Burp Suite
- **浏览器兼容性**: BrowserStack、CrossBrowserTesting
- **数据库测试**: MySQL Workbench、Navicat

---

**📝 文档版本**: v1.0  
**✍️  编写人员**: 高级测试工程师  
**📅 编写日期**: 2024年  
**�� 更新周期**: 每个迭代更新一次 