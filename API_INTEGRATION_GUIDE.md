# é—®å·ç³»ç»ŸAPIé›†æˆæŒ‡å—

## ğŸ¯ æ›´æ–°å†…å®¹æ¦‚è¿°

å·²æˆåŠŸå°†æ™®é€šç”¨æˆ·åŠŸèƒ½ä»æ¨¡æ‹Ÿæ•°æ®è¿ç§»åˆ°çœŸå®çš„åç«¯APIè°ƒç”¨ï¼Œç°åœ¨æ‰€æœ‰åŠŸèƒ½éƒ½ä½¿ç”¨å®é™…çš„æ•°æ®åº“æ•°æ®ã€‚

## ğŸ”§ åç«¯APIæ›´æ–°

### æ–°å¢æ¥å£

#### 1. è·å–ç”¨æˆ·å¯å¡«å†™é—®å·åˆ—è¡¨
- **æ¥å£**: `GET /api/questionnaire/available`
- **å‚æ•°**: 
  - `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
  - `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼‰
- **è¿”å›**: å½“å‰ç”¨æˆ·å¯å¡«å†™çš„é—®å·åˆ—è¡¨

#### 2. è·å–ç”¨æˆ·ä¸ªäººç­”é¢˜è®°å½•
- **æ¥å£**: `GET /api/answer/my-answers`
- **å‚æ•°**: 
  - `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
  - `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼‰
- **è¿”å›**: å½“å‰ç”¨æˆ·çš„ç­”é¢˜è®°å½•åˆ—è¡¨

#### 3. è·å–ç­”é¢˜è¯¦æƒ…
- **æ¥å£**: `GET /api/answer/{id}`
- **å‚æ•°**: 
  - `id`: ç­”é¢˜è®°å½•ID
- **è¿”å›**: å…·ä½“çš„ç­”é¢˜è¯¦æƒ…å’Œé—®å·å†…å®¹

### æœåŠ¡å±‚å®ç°

#### QuestionnaireService æ–°å¢æ–¹æ³•
```java
List<Map<String, Object>> getAvailableQuestionnaires(String token, Integer page, Integer size)
```
- æ ¹æ®JWTä»¤ç‰ŒéªŒè¯ç”¨æˆ·èº«ä»½
- è¿”å›å·²å‘å¸ƒä¸”åœ¨æœ‰æ•ˆæœŸå†…çš„é—®å·
- åŒ…å«é—®é¢˜æ•°é‡ç»Ÿè®¡

#### AnswerService æ–°å¢æ–¹æ³•
```java
List<Map<String, Object>> getMyAnswers(String token, Integer page, Integer size)
Map<String, Object> getAnswerDetail(Long id, String token)
```
- éªŒè¯ç”¨æˆ·èº«ä»½å’Œæƒé™
- æ”¯æŒåˆ†é¡µæŸ¥è¯¢
- æŒ‰æäº¤æ—¶é—´åˆ†ç»„å’Œæ’åº

## ğŸ¨ å‰ç«¯æ›´æ–°

### APIè°ƒç”¨æ›´æ–°

#### questionnaireAPI æ–°å¢æ–¹æ³•
```javascript
// è·å–ç”¨æˆ·å¯å¡«å†™é—®å·åˆ—è¡¨
getAvailable: (params) => request.get('/questionnaire/available', { params })
```

#### é¡µé¢ç»„ä»¶æ›´æ–°

1. **QuestionnaireFill.vue** - é—®å·å¡«å†™é¡µé¢
   - âœ… ç§»é™¤æ¨¡æ‹Ÿæ•°æ®
   - âœ… é›†æˆçœŸå®APIè°ƒç”¨
   - âœ… é”™è¯¯å¤„ç†å’ŒloadingçŠ¶æ€

2. **MyResponses.vue** - ä¸ªäººè®°å½•é¡µé¢
   - âœ… ç§»é™¤æ¨¡æ‹Ÿæ•°æ®
   - âœ… é›†æˆçœŸå®APIè°ƒç”¨
   - âœ… åˆ†é¡µåŠŸèƒ½æ”¯æŒ

## ğŸš€ å¯åŠ¨æŒ‡å—

### åç«¯å¯åŠ¨
```bash
cd "Questionnaire system"
# è¿è¡Œå¯åŠ¨è„šæœ¬
start-backend.bat

# æˆ–æ‰‹åŠ¨å¯åŠ¨
mvn spring-boot:run
```

### å‰ç«¯å¯åŠ¨
```bash
cd frontend
# è¿è¡Œå¯åŠ¨è„šæœ¬
start-frontend.bat

# æˆ–æ‰‹åŠ¨å¯åŠ¨
npm install
npm run dev
```

### æ•°æ®åº“å‡†å¤‡
```sql
-- æ‰§è¡ŒSQLè„šæœ¬æ·»åŠ æ™®é€šç”¨æˆ·
mysql -u root -p your_database < "Questionnaire system/src/main/resources/db/add_user.sql"
```

## ğŸ”‘ æµ‹è¯•è´¦æˆ·

### ç®¡ç†å‘˜è´¦æˆ·
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`
- **æƒé™**: å®Œæ•´ç®¡ç†æƒé™

### æ™®é€šç”¨æˆ·è´¦æˆ·
- **ç”¨æˆ·å**: `zhangsan` / `lisi` / `wangwu`
- **å¯†ç **: `admin123`
- **æƒé™**: é—®å·å¡«å†™å’ŒæŸ¥çœ‹ä¸ªäººè®°å½•

## ğŸ“± åŠŸèƒ½éªŒè¯

### æ™®é€šç”¨æˆ·åŠŸèƒ½æµ‹è¯•

1. **ç™»å½•éªŒè¯**
   - ä½¿ç”¨æ™®é€šç”¨æˆ·è´¦æˆ·ç™»å½•
   - éªŒè¯JWTä»¤ç‰Œç”Ÿæˆå’Œå­˜å‚¨
   - ç¡®è®¤è§’è‰²æƒé™æ­£ç¡®è®¾ç½®

2. **é—®å·å¡«å†™åŠŸèƒ½**
   - è®¿é—® `/questionnaire-fill`
   - æŸ¥çœ‹å¯å¡«å†™é—®å·åˆ—è¡¨ï¼ˆéœ€è¦ç®¡ç†å‘˜å…ˆå‘å¸ƒé—®å·ï¼‰
   - éªŒè¯é—®å·çŠ¶æ€å’Œæ—¶é—´é™åˆ¶

3. **ä¸ªäººè®°å½•åŠŸèƒ½**
   - è®¿é—® `/my-responses`
   - æŸ¥çœ‹ä¸ªäººç­”é¢˜å†å²
   - æµ‹è¯•åˆ†é¡µåŠŸèƒ½

### APIè°ƒç”¨æµç¨‹

```
ç”¨æˆ·ç™»å½• â†’ è·å–JWTä»¤ç‰Œ â†’ 
â†“
è¯·æ±‚é—®å·åˆ—è¡¨ â†’ éªŒè¯ä»¤ç‰Œ â†’ è¿”å›å¯å¡«å†™é—®å· â†’
â†“
å¡«å†™é—®å· â†’ æäº¤ç­”æ¡ˆ â†’ ä¿å­˜åˆ°æ•°æ®åº“ â†’
â†“
æŸ¥çœ‹è®°å½• â†’ éªŒè¯æƒé™ â†’ è¿”å›ä¸ªäººç­”é¢˜è®°å½•
```

## ğŸ” è°ƒè¯•ä¿¡æ¯

### åç«¯æ—¥å¿—
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„JWTéªŒè¯æ—¥å¿—
- ç›‘æ§SQLæŸ¥è¯¢æ‰§è¡Œæƒ…å†µ
- è§‚å¯Ÿç”¨æˆ·æƒé™éªŒè¯è¿‡ç¨‹

### å‰ç«¯è°ƒè¯•
- ä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·æŸ¥çœ‹APIè¯·æ±‚
- æ£€æŸ¥JWTä»¤ç‰Œæ˜¯å¦æ­£ç¡®æºå¸¦
- éªŒè¯å“åº”æ•°æ®æ ¼å¼

### å¸¸è§é—®é¢˜è§£å†³

1. **401 Unauthorized**
   - æ£€æŸ¥JWTä»¤ç‰Œæ˜¯å¦è¿‡æœŸ
   - ç¡®è®¤è¯·æ±‚å¤´åŒ…å«æ­£ç¡®çš„Authorizationå­—æ®µ

2. **Empty Data**
   - ç¡®ä¿æ•°æ®åº“ä¸­æœ‰å·²å‘å¸ƒçš„é—®å·
   - æ£€æŸ¥é—®å·çš„æ—¶é—´èŒƒå›´è®¾ç½®

3. **APIè°ƒç”¨å¤±è´¥**
   - ç¡®è®¤åç«¯æœåŠ¡æ­£å¸¸è¿è¡Œï¼ˆç«¯å£8080ï¼‰
   - æ£€æŸ¥è·¨åŸŸé…ç½®æ˜¯å¦æ­£ç¡®

## ğŸ“Š æ•°æ®æµç¤ºä¾‹

### è·å–å¯å¡«å†™é—®å·
```
å‰ç«¯è¯·æ±‚: GET /api/questionnaire/available?page=1&size=10
â†“
åç«¯å¤„ç†: 
1. éªŒè¯JWTä»¤ç‰Œ
2. æŸ¥è¯¢å·²å‘å¸ƒä¸”æœ‰æ•ˆçš„é—®å·
3. ç»Ÿè®¡é—®é¢˜æ•°é‡
4. è¿”å›æ ¼å¼åŒ–æ•°æ®
â†“
å‰ç«¯æ¥æ”¶: é—®å·åˆ—è¡¨æ•°æ®ç”¨äºé¡µé¢å±•ç¤º
```

### è·å–ç­”é¢˜è®°å½•
```
å‰ç«¯è¯·æ±‚: GET /api/answer/my-answers?page=1&size=10
â†“
åç«¯å¤„ç†:
1. éªŒè¯ç”¨æˆ·èº«ä»½
2. æŸ¥è¯¢ç”¨æˆ·ç­”é¢˜è®°å½•
3. æŒ‰responseIdåˆ†ç»„
4. å…³è”é—®å·ä¿¡æ¯
â†“
å‰ç«¯æ¥æ”¶: ä¸ªäººç­”é¢˜è®°å½•åˆ—è¡¨
```

## âœ… å®ŒæˆçŠ¶æ€

- âœ… åç«¯APIæ¥å£å®ç°
- âœ… æœåŠ¡å±‚æ–¹æ³•æ·»åŠ 
- âœ… JWTæƒé™éªŒè¯é›†æˆ
- âœ… å‰ç«¯æ¨¡æ‹Ÿæ•°æ®ç§»é™¤
- âœ… çœŸå®APIè°ƒç”¨é›†æˆ
- âœ… é”™è¯¯å¤„ç†å®Œå–„
- âœ… å¯åŠ¨è„šæœ¬åˆ›å»º
- âœ… æµ‹è¯•ç”¨æˆ·æ•°æ®å‡†å¤‡

ç°åœ¨æ™®é€šç”¨æˆ·çš„æ‰€æœ‰åŠŸèƒ½éƒ½å·²è¿æ¥åˆ°çœŸå®çš„åç«¯APIï¼Œå¯ä»¥è¿›è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•ï¼ 