# 代码修改规则指南

## 一、修改前的准备工作

### 1.1 代码理解
- 仔细阅读相关代码，完全理解业务逻辑
- 理解代码结构和设计模式
- 识别关键依赖和接口
- 记录当前所有正常工作的功能点

### 1.2 修改范围评估
- 确定最小修改范围
- 识别可能受影响的相关模块
- 评估修改的风险级别
- 制定回滚策略

### 1.3 修改方案设计
- 设计最小化修改方案
- 确保方案符合现有代码风格
- 考虑向后兼容性
- 预估可能的副作用

## 二、修改过程中的规范

### 2.1 基本原则
- 一次只改一个问题
- 保持代码结构的一致性
- 遵循"如果它没坏，就不要去修它"的原则
- 保持原有的代码风格和命名规范

### 2.2 修改步骤
1. 创建修改前的代码快照
2. 实施最小化修改
3. 每次修改后立即测试
4. 记录所有修改点

### 2.3 测试要求
- 修改后立即进行单元测试
- 验证修改点的功能正确性
- 检查相关功能是否受影响
- 进行必要的集成测试

## 三、修改后的检查流程

### 3.1 功能验证
- 验证修改的功能是否达到预期
- 确保修改没有引入新的问题
- 验证错误处理和边界情况
- 检查性能影响

### 3.2 代码审查
- 检查代码质量和规范性
- 确保注释的完整性和准确性
- 验证命名的一致性
- 检查是否有冗余代码

### 3.3 相关功能检查
- 检查依赖模块的功能
- 验证接口的兼容性
- 测试用户交互流程
- 确保没有破坏现有功能

## 四、问题处理机制

### 4.1 发现新问题时
- 立即记录问题详情
- 不要急于修复，先理解原因
- 评估问题的影响范围
- 制定系统性的解决方案

### 4.2 回滚机制
- 设置清晰的回滚条件
- 准备回滚脚本或步骤
- 确保能快速恢复到之前状态
- 记录回滚操作的细节

## 五、文档维护

### 5.1 修改记录
- 记录所有修改的内容和原因
- 更新相关文档和注释
- 记录关键决策点
- 维护变更日志

### 5.2 经验总结
- 总结修改中的经验教训
- 更新开发规范和最佳实践
- 分享常见问题和解决方案
- 持续改进修改流程

## 六、特殊情况处理

### 6.1 紧急修复
- 定义紧急情况的标准
- 简化紧急修复的流程
- 确保基本质量控制
- 后续进行完整的修复

### 6.2 重大变更
- 需要团队评审和讨论
- 制定详细的实施计划
- 准备充分的测试用例
- 分阶段实施变更

## 七、最佳实践建议

### 7.1 代码组织
- 保持代码的模块化
- 避免过度耦合
- 遵循单一职责原则
- 保持代码的可测试性

### 7.2 性能考虑
- 评估修改对性能的影响
- 避免引入性能瓶颈
- 进行必要的性能测试
- 优化关键路径

### 7.3 安全性
- 保持现有的安全措施
- 避免引入安全漏洞
- 遵循安全编码规范
- 及时修复安全问题

## 八、持续改进

### 8.1 规则更新
- 定期评审和更新规则
- 收集团队反馈
- 适应项目发展需求
- 保持规则的实用性

### 8.2 工具支持
- 使用版本控制系统
- 配置自动化测试
- 使用代码质量工具
- 维护开发辅助工具

---

注意：本规则文档应根据项目实际情况进行调整和完善。团队成员应定期审查和更新这些规则，确保它们始终符合项目的需求和最佳实践。 